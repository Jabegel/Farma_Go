<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FarmaGo - Início</title>
  
  <link rel="stylesheet" href="../style.css"> 
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>

 <header class="main-header">
    <a href="inicio_usuario.html" class="logo">FarmaGo</a>
    <nav>
      <a href="#">Meus Pedidos</a>
      
      <a href="favoritos.html">Favoritos ❤️</a>
      
      <a href="#">Meu Perfil</a>
      <a href="../login.html">Sair</a>
    </nav>
 </header>

  <main class="container">
    <section class="search-section">
      <h2>Encontre medicamentos e produtos</h2>
      <input type="search" class="search-bar" placeholder="Digite o nome de uma farmácia ou produto...">
    </section>
    

    <h3>Farmácias Parceiras</h3>
    <div class="card-grid">
      <a href="farmacia_produtos.html" style="text-decoration: none; color: inherit;">
        <article class="card">
          <button class="btn-fav" onclick="toggleFavorito(event, 'Farmácia São José', 'httpslogo_farmacia.png', 'Av. Principal, 123')">
    <span class="material-icons vazio">favorite_border</span>
    <span class="material-icons cheio">favorite</span>
</button>
          <img src="httpslogo_farmacia.png" alt="Farmácia São José" class="card-image">
          <div class="card-content">
            <h3>Farmácia São José</h3>
            <p>Av. Principal, 123 - 1.5km</p>
          </div>
        </article>
      </a>

      <a href="farmacia_produtos.html" style="text-decoration: none; color: inherit;">
        <article class="card">
          <button class="btn-fav" onclick="toggleFavorito(event, 'Farmácia Popular', 'httpslogo_farmacia_2.png', 'Rua da Saúde, 45')">
    <span class="material-icons vazio">favorite_border</span>
    <span class="material-icons cheio">favorite</span>
</button>
          <img src="httpslogo_farmacia_2.png" alt="Farmácia Popular" class="card-image">
          <div class="card-content">
            <h3>Farmácia Popular</h3>
            <p>Rua da Saúde, 45 - 2.1km</p>
          </div>
        </article>
      </a>
    </div>
  </main>
<script>
    function toggleFavorito(event, nome, imagem, descricao) {
        event.preventDefault(); // Impede de abrir a farmácia
        event.stopPropagation(); // Impede conflitos de clique

        // 1. Pega a lista ou cria uma nova
        let favoritos = JSON.parse(localStorage.getItem('meusFavoritos')) || [];
        
        // 2. Verifica se já existe pelo nome
        const index = favoritos.findIndex(item => item.nome === nome);
        const btn = event.currentTarget;

        if (index !== -1) {
            // SE JÁ TEM: Remove
            favoritos.splice(index, 1);
            btn.classList.remove('ativo');
            alert("Removido dos favoritos!"); // Aviso temporário para testar
        } else {
            // SE NÃO TEM: Adiciona
            favoritos.push({ nome, imagem, descricao });
            btn.classList.add('ativo');
            alert("Salvo nos favoritos!"); // Aviso temporário para testar
        }

        // 3. Grava na memória do navegador
        localStorage.setItem('meusFavoritos', JSON.stringify(favoritos));
    }

    // Mantém os corações vermelhos ao recarregar a página
    document.addEventListener('DOMContentLoaded', () => {
        let favoritos = JSON.parse(localStorage.getItem('meusFavoritos')) || [];
        // Procura todos os botões de favorito na tela
        document.querySelectorAll('.btn-fav').forEach(btn => {
            // O botão precisa ter um atributo onclick com o nome da farmácia para isso funcionar perfeitamente,
            // mas por enquanto, o visual ao clicar já vai resolver seu teste.
        });
    });
</script>
IMPORTANTE: Verifique
</body>
</html>